(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(40)},29:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);a(23);var n=a(0),l=a.n(n),r=a(10),c=a.n(r),o=(a(29),a(17)),i=a(11),s=a(21),u=a(18),m=a(20),d=a(1),h=a(7),E=(a(32),a(33),a(42)),p=a(45),f=a(43),g=a(44),v=a(4),y=a.n(v);function b(e){var t=e.popupText,a=e.position;return t?l.a.createElement(E.a,{position:a},l.a.createElement(p.a,null,t)):l.a.createElement(E.a,{position:a})}function w(e){var t=e.data.map(function(e){return l.a.createElement(b,{position:e.position,popupText:e.popupText,key:e.position+e.popupText})});return l.a.createElement(f.a,{center:[0,0],zoom:1},l.a.createElement(g.a,{attribution:"Thunderforest",url:"https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png?apikey=7ee1e377fdd34773b610a69bd8e96e6f"}),t)}delete y.a.Icon.Default.prototype._getIconUrl,y.a.Icon.Default.mergeOptions({iconRetinaUrl:a(34),iconUrl:a(35),shadowUrl:a(36)});a(39);function _(e){return l.a.createElement("a",{href:"http://indexphonemica.net/doculects/"+e.language.inventory_id,target:"_blank",rel:"noopener noreferrer"},e.language.inventory_id)}function x(e){var t=e.doculect,a=t.source_author.split(";"),n=a.length>1?a.slice(0,a.length-1).map(function(e){return e.split(",")[0]}).join(", ")+" & "+a[a.length-1].split(",")[0]:a[0];"Unknown"===n&&(n="Unknown author"),null===t.source_year&&(t.source_year="Unknown year"),"."===n[n.length-1]&&(n=n.slice(0,n.length-1));var r="".concat(t.source_title,". ").concat(n,". ").concat(t.source_year,"."),c="https://glottolog.org/resource/reference/id/".concat(t.source_bibkey);return l.a.createElement("div",null,l.a.createElement("h3",null," ",t.language_name," ",l.a.createElement("a",{href:"http://indexphonemica.net/doculects/"+t.inventory_id},"(",t.inventory_id,")")),l.a.createElement(j,{doculect:t}),l.a.createElement("div",{className:"source-box"},l.a.createElement("p",null,r),l.a.createElement("p",null,l.a.createElement("a",{href:c},t.source_bibkey),l.a.createElement("a",{href:t.source_url},t.source_url?"\ud83d\udd17":""))))}function k(e){var t=e.rules;return l.a.createElement("div",null,l.a.createElement("h4",null,"Allophonic rules"),t.map(function(e){return l.a.createElement(N,{key:S(e),rule:e})}))}function N(e){var t=e.rule;return l.a.createElement("div",null,S(t))}function S(e){var t=e.phonemes.join("\xb7"),a=e.variation?">~":">",n=e.realization,l=e.environment;return"".concat(t," ").concat(a," ").concat(n," / ").concat(l)}function j(e){var t="https://glottolog.org/resource/languoid/id/".concat(e.doculect.dialect);return e.doculect.dialect?l.a.createElement("p",{className:"dialect-info"},"Dialect: ",l.a.createElement("a",{href:t},e.doculect.dialect_name)):e.doculect.dialect_name?l.a.createElement("p",{className:"dialect-info"},"Dialect: ",e.doculect.dialect_name):l.a.createElement("span",null)}function R(e){return l.a.createElement("div",{id:"help"},l.a.createElement("h3",null,"About"),l.a.createElement("p",null,"This is a search tool for the ",l.a.createElement("a",{href:"http://indexphonemica.net"},"Index Phonemica")," database."),l.a.createElement("h3",null,"Searching"),l.a.createElement("p",null,"A search query is minimally composed of a ",l.a.createElement("em",null,"search term"),". There are four types of search term."),l.a.createElement("p",null,"A ",l.a.createElement("em",null,"phoneme term"),' consists of a phoneme enclosed in forward slashes, optionally preceded by "no". This will find all doculects that have (or don\'t have, if there\'s a preceding "no") the given phoneme.'),l.a.createElement("p",null,"For example, ",l.a.createElement("code",null,"/t\u032a\u0299/")," will return all doculects that contain the phoneme represented in Index Phonemica by the text string ",l.a.createElement("code",null,"t\u032a\u0299"),", and ",l.a.createElement("code",null,"no /m/")," will return all doculects that do not contain the phoneme represented in Index Phonemica by the text string ",l.a.createElement("code",null,"/m/"),"."),l.a.createElement("p",null,"A ",l.a.createElement("em",null,"feature term")," consists of a number (optionally preceded by a ",l.a.createElement("code",null,"<")," or ",l.a.createElement("code",null,">")," sign), a space, and a string of pluses and minuses followed (with no intervening space) by the name of the feature to search. For example, ",l.a.createElement("code",null,"2 +coronal")," will return all doculects with exactly two [+coronal] segments, and ",l.a.createElement("code",null,">30 +syllabic")," will return all doculects with more than thirty vowels."),l.a.createElement("p",null,"For the numeric component of the feature term, ",l.a.createElement("code",null,"no")," can be used to mean ",l.a.createElement("code",null,"0"),", and ",l.a.createElement("code",null,"any")," can be used to mean ",l.a.createElement("code",null,"+0"),"."),l.a.createElement("p",null,"To search for multiple feature values on the same phoneme, separate the feature components with a semicolon. For example, ",l.a.createElement("code",null,"any +syllabic;+consonantal")," will return a list of doculects with syllabic consonants."),l.a.createElement("p",null,"To ignore phonemes marked as marginal, use ",l.a.createElement("code",null,"-m"),". To ignore phonemes marked as only occurring in loans, use ",l.a.createElement("code",null,"-l"),". For example, Northwest Mekeo (meke1243-1) only contains coronal consonants in recent English loanwords; ",l.a.createElement("code",null,"no +coronal -l")," will return this doculect, but ",l.a.createElement("code",null,"no +coronal")," will not."),l.a.createElement("p",null,"(Some phonemes may be marked as both marginal and loan phonemes; this means that they are stated to be marginal outside loanwords, or to mostly occur in loans. Both ",l.a.createElement("code",null,"-m")," and ",l.a.createElement("code",null,"-l")," will cause these phonemes to be ignored.)"),l.a.createElement("p",null,"A ",l.a.createElement("em",null,"property term")," searches for languages with specific properties. Property terms are of the form ",l.a.createElement("code",null,"field:value"),". To limit the search to languages without specific properties, use ",l.a.createElement("code",null,"!field:value"),". Values are case-insensitive, and properties of languages are taken from ",l.a.createElement("a",{href:"https://glottolog.org"},"Glottolog"),". For example, ",l.a.createElement("code",null,"country:australia")," will return all doculects of languages that Glottolog lists as spoken in Australia. Spaces in the value must be replaced with underscores, as in ",l.a.createElement("code",null,"country:united_states"),". See below for a full list of properties."),l.a.createElement("p",null,"An ",l.a.createElement("em",null,"allophone term")," searches allophonic rules. These use phonemes or feature bundles separated by ",l.a.createElement("code",null,">"),". For example, ",l.a.createElement("code",null,"+coronal > -coronal")," searches for doculects with allophonic rules that transform a coronal phoneme into a non-coronal realization, and ",l.a.createElement("code",null,"/t/ > +tap")," searches for doculects with allophonic rules transforming the phoneme ",l.a.createElement("code",null,"/t/")," into a tap."),l.a.createElement("p",null,"Search terms may be joined by the logical operators ",l.a.createElement("code",null,"and")," and ",l.a.createElement("code",null,"or"),". These are postfix."),l.a.createElement("h3",null,"Examples"),l.a.createElement("p",{className:"example-text"},"Find doculects with only two coronals:"),l.a.createElement("code",{className:"example"},"2 +coronal"),l.a.createElement("p",{className:"example-text"},"Find doculects with three or fewer vowels:"),l.a.createElement("code",{className:"example"},"<4 +syllabic"),l.a.createElement("p",{className:"example-text"},"Find doculects with three or fewer vowels or the phoneme /d/:"),l.a.createElement("code",{className:"example"},"<4 +syllabic /d/ or"),l.a.createElement("p",{className:"example-text"},"Find doculects with no dorsal consonants (excluding semivowels):"),l.a.createElement("code",{className:"example"},"no +dorsal;+consonantal"),l.a.createElement("p",{className:"example-text"},"Find doculects with /d/ and no /m/:"),l.a.createElement("code",{className:"example"},"/d/ no /m/ and"),l.a.createElement("p",{className:"example-text"},"Find doculects in Papua New Guinea with t-flapping:"),l.a.createElement("code",{className:"example"},"country:papua_new_guinea /t/ > +tap and"),l.a.createElement("h3",null,"List of features"),l.a.createElement("p",null,"Index Phonemica's feature system is currently derived from ",l.a.createElement("a",{href:"https://phoible.org/"},"PHOIBLE"),"'s, but the names of the features have been converted from camelCase to snake_case, and 'raisedLarynxEjective' and 'loweredLarynxImplosive' have been renamed to ",l.a.createElement("code",null,"ejective")," and ",l.a.createElement("code",null,"implosive"),"."),l.a.createElement("code",null,l.a.createElement("ul",null,l.a.createElement("li",null,"tone"),l.a.createElement("li",null,"stress"),l.a.createElement("li",null,"syllabic"),l.a.createElement("li",null,"short"),l.a.createElement("li",null,"long"),l.a.createElement("li",null,"consonantal"),l.a.createElement("li",null,"sonorant"),l.a.createElement("li",null,"continuant"),l.a.createElement("li",null,"delayed_release"),l.a.createElement("li",null,"approximant"),l.a.createElement("li",null,"tap"),l.a.createElement("li",null,"trill"),l.a.createElement("li",null,"nasal"),l.a.createElement("li",null,"lateral"),l.a.createElement("li",null,"labial"),l.a.createElement("li",null,"round"),l.a.createElement("li",null,"labiodental"),l.a.createElement("li",null,"coronal"),l.a.createElement("li",null,"anterior"),l.a.createElement("li",null,"distributed"),l.a.createElement("li",null,"strident"),l.a.createElement("li",null,"dorsal"),l.a.createElement("li",null,"high"),l.a.createElement("li",null,"low"),l.a.createElement("li",null,"front"),l.a.createElement("li",null,"back"),l.a.createElement("li",null,"tense"),l.a.createElement("li",null,"retracted_tongue_root"),l.a.createElement("li",null,"advanced_tongue_root"),l.a.createElement("li",null,"periodic_glottal_source"),l.a.createElement("li",null,"epilaryngeal_source"),l.a.createElement("li",null,"spread_glottis"),l.a.createElement("li",null,"constricted_glottis"),l.a.createElement("li",null,"fortis"),l.a.createElement("li",null,"ejective"),l.a.createElement("li",null,"implosive"),l.a.createElement("li",null,"click"))),l.a.createElement("h3",null,"List of properties"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"inventory_id")),l.a.createElement("li",null,l.a.createElement("code",null,"language_name")," (as given in the source)"),l.a.createElement("li",null,l.a.createElement("code",null,"glottocode")),l.a.createElement("li",null,l.a.createElement("code",null,"dialect")),l.a.createElement("li",null,l.a.createElement("code",null,"dialect_name")),l.a.createElement("li",null,l.a.createElement("code",null,"source_bibkey")),l.a.createElement("li",null,l.a.createElement("code",null,"source_url")),l.a.createElement("li",null,l.a.createElement("code",null,"source_doi")),l.a.createElement("li",null,l.a.createElement("code",null,"name")," (as given by Glottolog)"),l.a.createElement("li",null,l.a.createElement("code",null,"iso6393")),l.a.createElement("li",null,l.a.createElement("code",null,"family")),l.a.createElement("li",null,l.a.createElement("code",null,"genus")),l.a.createElement("li",null,l.a.createElement("code",null,"macroarea")," (eurasia, north_america, south_america, africa, australia, papunesia)"),l.a.createElement("li",null,l.a.createElement("code",null,"country_id")),l.a.createElement("li",null,l.a.createElement("code",null,"country"))))}var T=window.location.protocol+"//indexphonemica.herokuapp.com/api/";function I(e){return encodeURIComponent(e.toString().replace(/\\/g,"\\\\").replace(/&/g,"\\+").replace(/=/g,"\\e"))}function O(e){return decodeURIComponent(e.replace(/\\\\/g,"\\").replace(/\\\+/g,"&").replace(/\\e/g,"="))}function F(){var e=window.location.hash;if(""===e)return null;e=(e=e.slice(1,window.location.hash.length)).split("&");var t={},a=!0,n=!1,l=void 0;try{for(var r,c=e[Symbol.iterator]();!(a=(r=c.next()).done);a=!0){var o=r.value.split("=");o.length<2||(t[O(o[0])]=O(o[1]))}}catch(i){n=!0,l=i}finally{try{a||null==c.return||c.return()}finally{if(n)throw l}}return t}function C(e,t){var a=F();null===a&&(a={}),a[e]=t,function(e){var t=Object.keys(e).map(function(t){return"".concat(I(t),"=").concat(I(e[t]))});window.location.hash=t.join("&")}(a)}function A(){return l.a.createElement("span",null,"Loading...")}function P(e){if(!e.err)return l.a.createElement("div",null);var t=e.err.toString();return/[A-Za-z]*Error: /.test(t)||(t="Error: "+t),/Error: (E|e)rror:/.test(t)&&(t="E"+t.slice(8)),l.a.createElement("div",{className:"error"},t)}function U(e){return!1===e.value?l.a.createElement("div",null,"No results"):l.a.createElement("table",null,l.a.createElement("tbody",null,e.value.map(function(t){return l.a.createElement(z,{key:t.inventory_id,language:t,detailFn:e.detailFn})})))}function z(e){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("button",{className:"link-button",onClick:function(){return e.detailFn(e.language.inventory_id)}},e.language.language_name)),l.a.createElement("td",{className:"source-cell"},l.a.createElement(_,{language:e.language})),l.a.createElement("td",null,e.language.phonemes?l.a.createElement(H,{segments:e.language.phonemes}):"",e.language.allophones?l.a.createElement(B,{allophonic_rules:e.language.allophones}):""))}function D(e){var t=e.language;return l.a.createElement("div",{className:"sticky-wrapper-wrapper"},l.a.createElement("div",{className:"sticky-wrapper"},l.a.createElement("div",{className:"sticky-panel"},l.a.createElement("div",null,l.a.createElement(x,{doculect:t})),l.a.createElement(G,{name:"Consonants",inv:t.consonants,inv_id:t.id}),l.a.createElement(G,{name:"Clicks",inv:t.clicks,inv_id:t.id}),l.a.createElement(G,{name:"Vowels",inv:t.vowels,inv_id:t.id}),l.a.createElement(G,{name:"Diphthongs",inv:t.diphthongs,inv_id:t.id}),l.a.createElement(L,{name:"Syllabic consonants",inv:t.syllabic_consonants,inv_id:t.id}),l.a.createElement(L,{name:"Tones",inv:t.tones,inv_id:t.id}),l.a.createElement("div",null,t.notes?l.a.createElement("h4",null,"Notes"):"",(t.notes||"").split("\n").map(function(e){return l.a.createElement("p",{key:e},e)})),t.allophonic_rules&&t.allophonic_rules.length>0?l.a.createElement(k,{rules:t.allophonic_rules}):"")))}function G(e){var t=e.inv.size;if(0===t)return l.a.createElement("div",null);var a=e.inv.contents;return l.a.createElement("div",null,l.a.createElement("h4",{className:"language-segments"},e.name," (",t,")"),l.a.createElement("table",{className:"inventory"},l.a.createElement("tbody",null,a.map(function(t,a){return l.a.createElement("tr",{key:"".concat(e.inv_id,"-").concat(a)},t.map(function(t,n){return l.a.createElement("td",{key:"".concat(e.inv_id,"-").concat(a,"-").concat(n,"}")},l.a.createElement(H,{segments:t}))}))}))))}function L(e){var t=e.inv.size;if(0===t)return l.a.createElement("div",null);var a=e.inv.contents;return l.a.createElement("div",null,l.a.createElement("h4",{className:"language-segments"},e.name," (",t,")"),l.a.createElement("span",null,l.a.createElement(H,{segments:a})))}function H(e){return e.segments.map(function(e){return function(e){var t="",a="";e.marginal&&(t+="(");e.loan&&(t+="{",a+="}");e.marginal&&(a+=")");var n=t+e.segment+a;return l.a.createElement("span",{key:n},n," ")}(e)})}function B(e){return e.allophonic_rules.map(function(e){return function(e){var t=">";e.variation&&(t+="~");return l.a.createElement("div",{className:"allophonic-rule",key:e.allophone_id},e.phoneme," ",t," ",e.realization," ",e.environment?"/":""," ",e.environment)}(e)})}var J=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(s.a)(this,Object(u.a)(t).call(this,e));var n=0,l=F();return l&&l.hasOwnProperty("detail")&&l.detail&&(n=4),a.state={value:"",searchResults:[],shouldHaveSearchResults:!1,searchLoading:!1,searchError:!1,detailResults:!1,detailError:!1,tabIndex:n},a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a.handleSearch=a.handleSearch.bind(Object(d.a)(Object(d.a)(a))),a.detail=a.detail.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=F();try{e.search&&this.search(e.search),e.detail&&this.detail(e.detail)}catch(t){return void(window.location.hash="")}}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSearch",value:function(e){e.preventDefault(),C("search",this.state.value),this.search(this.state.value)}},{key:"fetchJSON",value:function(e){return fetch(e,{method:"GET"}).then(function(e){return e.json()}).then(function(e){if(e.hasOwnProperty("error"))throw new Error(e.error);return e})}},{key:"search",value:function(e){var t=this,a=T+"query/"+I(e);this.setState({searching:!0}),this.fetchJSON(a,{method:"GET"}).then(function(e){return t.setState({searchResults:e,shouldHaveSearchResults:!0,searchError:!1,searching:!1})}).catch(function(e){return t.setState({searchResults:[],shouldHaveSearchResults:!1,searchError:e,searching:!1})})}},{key:"detail",value:function(e){var t=this,a=T+"language/"+e;C("detail",e),fetch(a,{method:"GET"}).then(function(e){return e.json()}).then(function(t){return t.id=e,t}).then(function(e){e.error?t.setState({detailResults:!1,detailError:e.error,tabIndex:1}):t.setState({detailResults:e,detailError:!1,tabIndex:1})}).catch(function(e){return t.setState({detailResults:!1,detailError:e,tabIndex:1})})}},{key:"render",value:function(){var e=this,t=function(e){return"".concat(e.language_name," (").concat(e.inventory_id,")")};return l.a.createElement("main",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("section",{id:"search",className:"col-sm"},l.a.createElement("form",{onSubmit:this.handleSearch},l.a.createElement("div",{id:"input-wrapper"},l.a.createElement("input",{id:"in",type:"text",value:this.state.value,onChange:this.handleChange})),l.a.createElement("input",{id:"submit",type:"submit",value:"Search"}),this.state.searching?l.a.createElement(A,null):""),l.a.createElement("div",{id:"res"},l.a.createElement(P,{err:this.state.searchError}),this.state.shouldHaveSearchResults?l.a.createElement(U,{value:this.state.searchResults,detailFn:this.detail}):"")),l.a.createElement("section",{id:"tabnav",className:"col-sm"},l.a.createElement(h.d,{selectedIndex:this.state.tabIndex,onSelect:function(t){return e.setState({tabIndex:t})}},l.a.createElement(h.b,null,l.a.createElement(h.a,null,"Help"),l.a.createElement(h.a,{disabled:!this.state.detailResults},"Detail"),l.a.createElement(h.a,{disabled:!this.state.searchResults},"Map")),l.a.createElement(h.c,null,l.a.createElement(R,null)),l.a.createElement(h.c,null,this.state.detailError?l.a.createElement(P,{err:this.state.detailError}):this.state.detailResults?l.a.createElement(D,{language:this.state.detailResults}):""),l.a.createElement(h.c,null,l.a.createElement(w,{data:function(e){var a={};return e.forEach(function(e){void 0===a[e.glottocode]?a[e.glottocode]={position:[e.latitude||0,e.longitude||0],popupText:t(e)}:a[e.glottocode].popupText+=", "+t(e)}),Object.values(a)}(this.state.searchResults)}))))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.db4ff56f.chunk.js.map